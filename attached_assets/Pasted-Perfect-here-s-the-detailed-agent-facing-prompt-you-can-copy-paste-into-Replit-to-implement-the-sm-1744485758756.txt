Perfect â€” hereâ€™s the detailed agent-facing prompt you can copy/paste into Replit to implement the smart prompt builder and override-aware formatting system into your app:

â¸»

ğŸ§  REPLIT AGENT TASK PROMPT

Objective:
Integrate the newly designed generateSmartPrompt() module into the ProJersey OpenAI prompt pipeline. This system ensures accurate and intelligent prompt construction per sport type, always includes branding and formatting standards, and adapts garment structure dynamically.

â¸»

âœ… REQUIRED TASKS:

1. ğŸ” Replace the existing generateKitPrompt() logic with the new smart override system:
	â€¢	Create a file: lib/sportsPromptOverrides.ts
	â€¢	Populate it with override definitions (collar style, sleeve logic, garment rules) per sport (e.g., basketball â†’ sleeveless jersey).
	â€¢	You can use this template for the override map:

export const sportPromptOverrides: Record<string, Partial<PromptOverrides>> = {
  basketball: {
    sleeveStyle: "sleeveless",
    collarType: "round crew neck",
    shortsRequired: false,
    designMood: "The jersey is built for agility and on-court visibility â€” sleek, minimal, and optimized for fast breaks.",
  },
  soccer: {
    sleeveStyle: "short-sleeved",
    collarType: "hybrid mandarin V-collar",
    shortsRequired: true,
  },
  rugby: {
    sleeveStyle: "short-sleeved with reinforced shoulders",
    collarType: "rugged reinforced V-neck",
    shortsRequired: true,
  },
  esports: {
    sleeveStyle: "long-sleeved",
    collarType: "crew collar",
    shortsRequired: false,
    designMood: "Futuristic and bold â€” this esports jersey brings digital edge to competitive identity.",
  },
  cricket: {
    sleeveStyle: "long-sleeved",
    collarType: "button mandarin",
    shortsRequired: false,
  },
};

2. ğŸ§  Create a new module: lib/promptBuilder.ts

This should export a function:

generateSmartPrompt(options: PromptInput): string

This must:
	â€¢	Dynamically adapt garment structure, panel/trim, design tone, and color phrasing.
	â€¢	Always include the branding token pfsportskit in the opening line.
	â€¢	Use emoji section markers and dividers consistently (ğŸ§â€â™‚ï¸, ğŸ§µ, ğŸ¨, ğŸ©³, ğŸ§©, ğŸ·ï¸, ğŸŒ, and â¸»).
	â€¢	Include optional garment sections like shorts only when needed (shortsRequired in overrides).
	â€¢	Pass final prompt through OpenAI (GPT-4o) for enhancement, maintaining JSON return format.

â¸»

3. ğŸ§ª Validate:
	â€¢	Add unit tests for key sports prompt variants (soccer, basketball, esports).
	â€¢	Log both base and enhanced prompts to /logs/smart_prompts.json.

â¸»

4. ğŸ§© Integration:
	â€¢	Replace the call in your existing generateKitPrompt() with generateSmartPrompt().
	â€¢	Ensure that prompt is passed to Replicate just as before.
	â€¢	Confirm the system gracefully handles missing overrides (fallback to generic structure).

â¸»

ğŸ’¡ Optional Enhancements:
	â€¢	Future: Add language localization toggle (e.g. EN, FR).
	â€¢	Track â€œprompt-to-order conversionâ€ for prompt tuning.

â¸»

Let me know once this is in place, and weâ€™ll continue with testing image consistency, user-side editing, or model fine-tuning.